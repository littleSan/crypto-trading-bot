## 止损管理器代码质量改进（低优先级）

### 1. 改进 cancelStopLossOrder 状态管理
- **位置**: `internal/executors/stoploss_manager.go:730-765`
- **问题**: 如果取消止损单失败，`StopLossOrderID` 不会被清空
- **改进**: 在某些失败场景下清空 OrderID（如订单已不存在）
- **优先级**: 低
- **影响**: 可能导致重复取消失败，但不影响核心功能

### 2. 增强 parseInt64 错误处理
- **位置**: `internal/executors/stoploss_manager.go:901-905`
- **问题**: 解析失败时返回 0，没有错误处理和日志
- **改进**: 使用 `strconv.ParseInt()` 并返回错误
- **优先级**: 低
- **影响**: 解析失败可能导致错误的 API 调用

### 3. 添加健康检查机制
- **功能**: 定期验证内存中的持仓 vs 币安实际持仓
- **建议**: 每小时运行一次 `ReconcilePosition`
- **优先级**: 低
- **影响**: 提高系统健壮性，避免长期状态不一致

### 4. Position 结构体字段去重
- **位置**: `internal/executors/binance_executor.go:53,58`
- **问题**: `Size` 和 `Quantity` 字段存储相同数据
- **改进**: 统一使用一个字段
- **优先级**: 低
- **影响**: 可能造成不一致，建议重构时处理

### 5. 添加单元测试
- **测试类型**:
  - 并发测试（多 goroutine 同时调用）
  - 失败恢复测试（数据库/API 失败）
  - 对账测试（模拟止损单触发）
  - 竞态检测（`go test -race`）
- **优先级**: 中低
- **影响**: 提高代码质量和可维护性

---

## 长期
1. 找一个 Figma 模板美化 WEB

## 短期
1. 支持加仓操作
2. 山寨币设置低杠杆
3. 配置 docker-compose 部署
4. 逐仓模式适配
