# Web ç›‘æ§ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

Web ç›‘æ§ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªå®æ—¶ç›‘æ§é¢æ¿ï¼Œå¯ä»¥æŸ¥çœ‹äº¤æ˜“æœºå™¨äººçš„è¿è¡ŒçŠ¶æ€ã€å†å²åˆ†æä¼šè¯å’Œç»Ÿè®¡æ•°æ®ã€‚ç³»ç»Ÿä½¿ç”¨ Hertz æ¡†æ¶æ„å»ºï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°å’Œå“åº”å¼è®¾è®¡ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘ç¨‹åº

```bash
# ä½¿ç”¨ Makefileï¼ˆæ¨èï¼‰
make build-web

# æˆ–æ‰‹åŠ¨ç¼–è¯‘
go build -o bin/crypto-trading-bot-web cmd/web/main.go
```

### 2. é…ç½®ç¯å¢ƒ

ç¡®ä¿ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®ï¼š

```env
# OpenAI APIï¼ˆç”¨äº LLM å†³ç­–ï¼‰
OPENAI_API_KEY=your_openai_key
OPENAI_BACKEND_URL=https://api.openai.com/v1

# Binance API
BINANCE_API_KEY=your_binance_key
BINANCE_API_SECRET=your_binance_secret
BINANCE_TEST_MODE=true  # å¼ºçƒˆæ¨èå…ˆä½¿ç”¨æµ‹è¯•æ¨¡å¼

# äº¤æ˜“å‚æ•°
CRYPTO_SYMBOL=BTC/USDT
CRYPTO_TIMEFRAME=1h      # æ”¯æŒ: 1m, 5m, 15m, 1h, 4h, 1d
BINANCE_LEVERAGE=10

# LLM æ¨¡å‹
DEEP_THINK_LLM=gpt-4o
QUICK_THINK_LLM=gpt-4o-mini

# Web æœåŠ¡å™¨é…ç½®
WEB_PORT=8000  # Web ç›‘æ§ç«¯å£ï¼ˆé»˜è®¤ 8000ï¼‰

# æ•°æ®åº“è·¯å¾„
DATABASE_PATH=./data/trading.db
```

### 3. è¿è¡Œç¨‹åº

```bash
# ä½¿ç”¨ Makefile
make run-web

# æˆ–ç›´æ¥è¿è¡Œ
./bin/crypto-trading-bot-web
```

ç¨‹åºå¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
```
================================================================================
åŠ å¯†è´§å¸äº¤æ˜“æœºå™¨äºº - Web ç›‘æ§æ¨¡å¼
================================================================================
äº¤æ˜“å¯¹: BTC/USDT
æ—¶é—´å‘¨æœŸ: 1h
Web ç«¯å£: 8000
ğŸŸ¢ è¿è¡Œæ¨¡å¼: æµ‹è¯•æ¨¡å¼ï¼ˆæ¨¡æ‹Ÿäº¤æ˜“ï¼‰

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆå§‹åŒ–æ•°æ®åº“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ•°æ®åº“å·²è¿æ¥: ./data/trading.db

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è®¾ç½®äº¤æ˜“æ‰€å‚æ•°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Web ç›‘æ§å¯åŠ¨: http://localhost:8000
è°ƒåº¦å™¨å·²åˆå§‹åŒ– (æ—¶é—´å‘¨æœŸ: 1h)
ä¸‹ä¸€æ¬¡åˆ†ææ—¶é—´: 2025-11-09 19:00:00

æŒ‰ Ctrl+C åœæ­¢ç¨‹åº
================================================================================
å¼€å§‹å¾ªç¯æ‰§è¡Œ
================================================================================
```

### 4. è®¿é—® Web ç•Œé¢

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼šhttp://localhost:8000

## Web ç•Œé¢åŠŸèƒ½

### ä¸»é¡µï¼ˆ/ï¼‰

å®æ—¶ç›‘æ§é¢æ¿ï¼Œæ˜¾ç¤ºï¼š

**çŠ¶æ€æ **ï¼š
- ğŸŸ¢ å®æ—¶ç›‘æ§æŒ‡ç¤ºå™¨
- äº¤æ˜“å¯¹ï¼ˆå¦‚ BTC/USDTï¼‰
- æ—¶é—´å‘¨æœŸï¼ˆå¦‚ 1hï¼‰
- è¿è¡Œæ¨¡å¼ï¼ˆæµ‹è¯•/å®ç›˜ï¼‰
- LLM çŠ¶æ€ï¼ˆå·²å¯ç”¨/æœªå¯ç”¨ï¼‰
- å½“å‰æ›´æ–°æ—¶é—´

**ç»Ÿè®¡å¡ç‰‡**ï¼š
- æ€»ä¼šè¯æ•°
- å·²æ‰§è¡Œäº¤æ˜“æ•°
- æ‰§è¡Œç‡ï¼ˆ%ï¼‰

**ä¼šè¯å†å²**ï¼š
- æœ€è¿‘ 10 ä¸ªåˆ†æä¼šè¯
- æ¯ä¸ªä¼šè¯æ˜¾ç¤ºï¼š
  - ä¼šè¯ ID
  - åˆ›å»ºæ—¶é—´
  - äº¤æ˜“å¯¹å’Œæ—¶é—´å‘¨æœŸ
  - æ˜¯å¦æ‰§è¡Œ
  - å†³ç­–æ‘˜è¦ï¼ˆå‰ 100 å­—ç¬¦ï¼‰

**è‡ªåŠ¨åˆ·æ–°**ï¼šé¡µé¢æ¯ 30 ç§’è‡ªåŠ¨åˆ·æ–°

### API ç«¯ç‚¹

#### GET /sessions

è·å–ä¼šè¯åˆ—è¡¨ï¼ˆJSON æ ¼å¼ï¼‰

å‚æ•°ï¼š
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤ 20ï¼‰

ç¤ºä¾‹ï¼š
```bash
curl http://localhost:8000/sessions?limit=10
```

å“åº”ï¼š
```json
{
  "sessions": [
    {
      "ID": 1,
      "Symbol": "BTC/USDT",
      "Timeframe": "1h",
      "CreatedAt": "2025-11-09T18:00:00Z",
      "Decision": "...",
      "Executed": false
    }
  ],
  "count": 1
}
```

#### GET /stats

è·å–ç»Ÿè®¡ä¿¡æ¯ï¼ˆJSON æ ¼å¼ï¼‰

ç¤ºä¾‹ï¼š
```bash
curl http://localhost:8000/stats
```

å“åº”ï¼š
```json
{
  "total_sessions": 25,
  "executed_count": 5,
  "execution_rate": 20.0
}
```

#### GET /health

å¥åº·æ£€æŸ¥ç«¯ç‚¹

ç¤ºä¾‹ï¼š
```bash
curl http://localhost:8000/health
```

å“åº”ï¼š
```json
{
  "status": "healthy",
  "time": "2025-11-09T18:30:00Z",
  "version": "1.0.0"
}
```

## å·¥ä½œæµç¨‹

### è‡ªåŠ¨æ‰§è¡Œæœºåˆ¶

1. **å¯åŠ¨é˜¶æ®µ**ï¼š
   - åˆå§‹åŒ–é…ç½®ã€æ—¥å¿—ã€æ•°æ®åº“
   - è¿æ¥å¸å®‰æœŸè´§äº¤æ˜“æ‰€
   - å¯åŠ¨ Web æœåŠ¡å™¨ï¼ˆåå° goroutineï¼‰
   - åˆå§‹åŒ– K çº¿è°ƒåº¦å™¨

2. **å¾ªç¯æ£€æŸ¥**ï¼š
   - æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡å½“å‰æ—¶é—´
   - åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ K çº¿å‘¨æœŸæ—¶é—´ç‚¹
   - ä¾‹å¦‚ 1h å‘¨æœŸï¼šåœ¨æ¯å°æ—¶çš„ :00 åˆ†è§¦å‘

3. **æ‰§è¡Œåˆ†æ**ï¼š
   - åˆ°æ—¶é—´ç‚¹æ—¶è‡ªåŠ¨è¿è¡Œå®Œæ•´å·¥ä½œæµ
   - åŒ…æ‹¬ï¼šå¸‚åœºåˆ†æ â†’ åŠ å¯†è´§å¸åˆ†æ â†’ æƒ…ç»ªåˆ†æ â†’ æŒä»“æŸ¥è¯¢ â†’ LLM å†³ç­–
   - ç»“æœè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“

4. **Web å±•ç¤º**ï¼š
   - åˆ·æ–° Web é¡µé¢å³å¯çœ‹åˆ°æœ€æ–°ç»“æœ
   - æˆ–é€šè¿‡ API è·å–æ•°æ®

### K çº¿æ—¶é—´å‘¨æœŸè¯´æ˜

ä¸åŒæ—¶é—´å‘¨æœŸçš„è§¦å‘æ—¶é—´ï¼š

- **1m**: æ¯åˆ†é’Ÿçš„ :00 ç§’
- **5m**: æ¯ 5 åˆ†é’Ÿï¼ˆ:00, :05, :10, ...ï¼‰
- **15m**: æ¯ 15 åˆ†é’Ÿï¼ˆ:00, :15, :30, :45ï¼‰
- **1h**: æ¯å°æ—¶çš„ :00 åˆ†
- **4h**: æ¯ 4 å°æ—¶ï¼ˆ00:00, 04:00, 08:00, ...ï¼‰
- **1d**: æ¯å¤©çš„ 00:00

## åå°è¿è¡Œ

### ä½¿ç”¨ nohup

```bash
nohup ./bin/crypto-trading-bot-web > logs/web.log 2>&1 &
```

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
tail -f logs/web.log
```

### ä½¿ç”¨ systemdï¼ˆæ¨èï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/crypto-trading-bot.service`ï¼š

```ini
[Unit]
Description=Crypto Trading Bot Web Monitor
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/crypto-trading-bot
ExecStart=/path/to/crypto-trading-bot/bin/crypto-trading-bot-web
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl enable crypto-trading-bot
sudo systemctl start crypto-trading-bot
```

æŸ¥çœ‹çŠ¶æ€ï¼š
```bash
sudo systemctl status crypto-trading-bot
```

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
sudo journalctl -u crypto-trading-bot -f
```

## é…ç½®è¯´æ˜

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£ä¸º 8000ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡ä¿®æ”¹ï¼š

```env
WEB_PORT=9000
```

### LLM é…ç½®

å¦‚æœä¸é…ç½® OpenAI API Keyï¼Œç³»ç»Ÿä¼šä½¿ç”¨ç®€å•è§„åˆ™å†³ç­–ï¼š

```env
# ç•™ç©ºæˆ–è®¾ç½®ä¸ºé»˜è®¤å€¼ä¼šç¦ç”¨ LLM
OPENAI_API_KEY=
# æˆ–
OPENAI_API_KEY=your_openai_key
```

ç³»ç»Ÿä¼šåœ¨å¯åŠ¨æ—¶æ˜¾ç¤º LLM çŠ¶æ€ï¼š
- "LLM å·²å¯ç”¨" - API Key å·²é…ç½®
- "LLM æœªå¯ç”¨" - ä½¿ç”¨è§„åˆ™å†³ç­–

### æµ‹è¯•æ¨¡å¼ vs å®ç›˜æ¨¡å¼

**å¼ºçƒˆæ¨èå…ˆä½¿ç”¨æµ‹è¯•æ¨¡å¼**ï¼š

```env
BINANCE_TEST_MODE=true   # æµ‹è¯•æ¨¡å¼ï¼ˆå®‰å…¨ï¼‰
```

æµ‹è¯•æ¨¡å¼ç‰¹ç‚¹ï¼š
- ä½¿ç”¨å¸å®‰æµ‹è¯•ç½‘ç»œ
- ä¸ä½¿ç”¨çœŸå®èµ„é‡‘
- å¯ä»¥å®‰å…¨æµ‹è¯•ç­–ç•¥

å®ç›˜æ¨¡å¼ï¼š
```env
BINANCE_TEST_MODE=false  # å®ç›˜æ¨¡å¼ï¼ˆå±é™©ï¼ï¼‰
```

## å®‰å…¨å»ºè®®

1. **API å¯†é’¥å®‰å…¨**ï¼š
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥
   - ä½¿ç”¨ IP ç™½åå•é™åˆ¶ API å¯†é’¥
   - å®šæœŸè½®æ¢å¯†é’¥

2. **æµ‹è¯•ä¼˜å…ˆ**ï¼š
   - å§‹ç»ˆå…ˆåœ¨æµ‹è¯•æ¨¡å¼ä¸‹è¿è¡Œ
   - éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§åå†è€ƒè™‘å®ç›˜

3. **ç›‘æ§å‘Šè­¦**ï¼š
   - å®šæœŸæ£€æŸ¥ Web ç•Œé¢
   - ç›‘æ§æ‰§è¡Œç»“æœå’Œç›ˆäº
   - è®¾ç½®æ­¢æŸå’Œé£é™©æ§åˆ¶

4. **ç½‘ç»œå®‰å…¨**ï¼š
   - å¦‚æœå…¬å¼€è®¿é—®ï¼Œå»ºè®®é…ç½®åå‘ä»£ç†
   - æ·»åŠ èº«ä»½è®¤è¯ï¼ˆå¦‚ nginx basic authï¼‰
   - ä½¿ç”¨ HTTPS

## æ•…éšœæ’é™¤

### ç«¯å£å·²è¢«å ç”¨

é”™è¯¯ä¿¡æ¯ï¼š`bind: address already in use`

è§£å†³æ–¹æ³•ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8000

# æˆ–ä¿®æ”¹ç«¯å£
export WEB_PORT=9000
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

é”™è¯¯ä¿¡æ¯ï¼š`Failed to connect to database`

è§£å†³æ–¹æ³•ï¼š
```bash
# æ£€æŸ¥æ•°æ®åº“ç›®å½•æ˜¯å¦å­˜åœ¨
mkdir -p data

# æ£€æŸ¥æƒé™
chmod 755 data
```

### LLM è°ƒç”¨å¤±è´¥

é”™è¯¯ä¿¡æ¯ï¼š`LLM è°ƒç”¨å¤±è´¥`

å¯èƒ½åŸå› ï¼š
1. API Key é…ç½®é”™è¯¯
2. ç½‘ç»œè¿æ¥é—®é¢˜
3. API é…é¢ç”¨å°½

ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°è§„åˆ™å†³ç­–ï¼Œä¸å½±å“æ­£å¸¸è¿è¡Œã€‚

### Web ç•Œé¢æ— æ³•è®¿é—®

æ£€æŸ¥é¡¹ï¼š
1. ç¨‹åºæ˜¯å¦æ­£å¸¸è¿è¡Œ
2. é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ç«¯å£
3. ä½¿ç”¨ `curl http://localhost:8000/health` æµ‹è¯•

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

å®šæœŸæ¸…ç†æ—§æ•°æ®ï¼š
```bash
# ä½¿ç”¨ query å·¥å…·æŸ¥çœ‹æ•°æ®é‡
./bin/query stats

# æ‰‹åŠ¨æ¸…ç†ï¼ˆå¯é€‰ï¼‰
sqlite3 data/trading.db "DELETE FROM trading_sessions WHERE created_at < datetime('now', '-30 days');"
sqlite3 data/trading.db "VACUUM;"
```

### å¹¶å‘ä¼˜åŒ–

ç³»ç»Ÿå·²ç»å®ç°äº†å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–ï¼š
- å¸‚åœºåˆ†æå¸ˆå’Œæƒ…ç»ªåˆ†æå¸ˆå¹¶è¡Œè¿è¡Œ
- é¢„æœŸæ€§èƒ½æå‡ 40-50%

## ä¸ Python ç‰ˆæœ¬å¯¹æ¯”

### æ€§èƒ½æå‡

- **å¯åŠ¨é€Ÿåº¦**: Go ç‰ˆæœ¬çº¦å¿« 5-10 å€
- **å†…å­˜å ç”¨**: å‡å°‘çº¦ 60-70%
- **å¹¶å‘èƒ½åŠ›**: æ›´å¼ºçš„å¹¶å‘å¤„ç†èƒ½åŠ›

### åŠŸèƒ½å¯¹ç­‰

âœ… æ‰€æœ‰ Python ç‰ˆæœ¬çš„æ ¸å¿ƒåŠŸèƒ½å‡å·²å®ç°ï¼š
- Eino Graph å·¥ä½œæµï¼ˆæ›¿ä»£ LangGraphï¼‰
- 4 ä¸ªåˆ†æå¸ˆ Agent
- æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- å¸‚åœºæƒ…ç»ªåˆ†æ
- LLM æ™ºèƒ½å†³ç­–
- æ•°æ®æŒä¹…åŒ–
- Web ç›‘æ§

## ä¸‹ä¸€æ­¥

1. **æµ‹è¯•éªŒè¯**ï¼šåœ¨æµ‹è¯•æ¨¡å¼ä¸‹è¿è¡Œå‡ å¤©ï¼ŒéªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§
2. **æ€§èƒ½åŸºå‡†æµ‹è¯•**ï¼šå¯¹æ¯” Python ç‰ˆæœ¬çš„æ€§èƒ½å·®å¼‚
3. **ç­–ç•¥ä¼˜åŒ–**ï¼šæ ¹æ®å†å²æ•°æ®è°ƒæ•´ç­–ç•¥å‚æ•°
4. **å®ç›˜éƒ¨ç½²**ï¼ˆè°¨æ…ï¼‰ï¼šç¡®è®¤ç­–ç•¥ç¨³å®šåå†è€ƒè™‘å®ç›˜

## ç›¸å…³æ–‡æ¡£

- `STORAGE_USAGE.md` - æ•°æ®åº“ä½¿ç”¨è¯´æ˜
- `GO_MIGRATION_PROGRESS.md` - è¿ç§»è¿›åº¦æ–‡æ¡£
- `Turn_to_go.md` - è¿ç§»è®¡åˆ’
- `.env.example` - é…ç½®ç¤ºä¾‹

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. ç»ˆç«¯æ—¥å¿—è¾“å‡º
2. æ•°æ®åº“æŸ¥è¯¢å·¥å…·ï¼š`./bin/query stats`
3. Web å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health
